"use strict";function rangeParser(e,r,t){var a=r.indexOf("=");if(-1===a)return-2;var n=r.slice(a+1).split(","),s=[];s.type=r.slice(0,a);for(var i=0;i<n.length;i++){var o=n[i].split("-"),u=parseInt(o[0],10),l=parseInt(o[1],10);isNaN(u)?(u=e-l,l=e-1):isNaN(l)&&(l=e-1),l>e-1&&(l=e-1),isNaN(u)||isNaN(l)||u>l||0>u||s.push({start:u,end:l})}return s.length<1?-1:t&&t.combine?combineRanges(s):s}function combineRanges(e){for(var r=e.map(mapWithIndex).sort(sortByRangeStart),t=0,a=1;a<r.length;a++){var n=r[a],s=r[t];n.start>s.end+1?r[++t]=n:n.end>s.end&&(s.end=n.end,s.index=Math.min(s.index,n.index))}r.length=t+1;var i=r.sort(sortByRangeIndex).map(mapWithoutIndex);return i.type=e.type,i}function mapWithIndex(e,r){return{start:e.start,end:e.end,index:r}}function mapWithoutIndex(e){return{start:e.start,end:e.end}}function sortByRangeIndex(e,r){return e.index-r.index}function sortByRangeStart(e,r){return e.start-r.start}module.exports=rangeParser;