"use strict";var parseUrl=require("parseurl"),qs=require("qs");module.exports=function(e){var r=Object.create(e||null),t=qs.parse;return"function"==typeof e&&(t=e,r=void 0),void 0!==r&&void 0===r.allowPrototypes&&(r.allowPrototypes=!0),function(e,a,n){if(!e.query){var s=parseUrl(e).query;e.query=t(s,r)}n()}};