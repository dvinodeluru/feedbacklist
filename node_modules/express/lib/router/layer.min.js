"use strict";function Layer(e,r,t){if(!(this instanceof Layer))return new Layer(e,r,t);debug("new %o",e);var a=r||{};this.handle=t,this.name=t.name||"<anonymous>",this.params=void 0,this.path=void 0,this.regexp=pathRegexp(e,this.keys=[],a),this.regexp.fast_star="*"===e,this.regexp.fast_slash="/"===e&&a.end===!1}function decode_param(e){if("string"!=typeof e||0===e.length)return e;try{return decodeURIComponent(e)}catch(r){throw r instanceof URIError&&(r.message="Failed to decode param '"+e+"'",r.status=r.statusCode=400),r}}var pathRegexp=require("path-to-regexp"),debug=require("debug")("express:router:layer"),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=Layer,Layer.prototype.handle_error=function(e,r,t,a){var n=this.handle;if(4!==n.length)return a(e);try{n(e,r,t,a)}catch(s){a(s)}},Layer.prototype.handle_request=function(e,r,t){var a=this.handle;if(a.length>3)return t();try{a(e,r,t)}catch(n){t(n)}},Layer.prototype.match=function t(e){var t;if(null!=e){if(this.regexp.fast_slash)return this.params={},this.path="",!0;if(this.regexp.fast_star)return this.params={0:decode_param(e)},this.path=e,!0;t=this.regexp.exec(e)}if(!t)return this.params=void 0,this.path=void 0,!1;this.params={},this.path=t[0];for(var r=this.keys,a=this.params,n=1;n<t.length;n++){var s=r[n-1],i=s.name,o=decode_param(t[n]);void 0===o&&hasOwnProperty.call(a,i)||(a[i]=o)}return!0};