"use strict";function View(e,r){var t=r||{};if(this.defaultEngine=t.defaultEngine,this.ext=extname(e),this.name=e,this.root=t.root,!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");var a=e;if(this.ext||(this.ext="."!==this.defaultEngine[0]?"."+this.defaultEngine:this.defaultEngine,a+=this.ext),!t.engines[this.ext]){var n=this.ext.substr(1);debug('require "%s"',n),t.engines[this.ext]=require(n).__express}this.engine=t.engines[this.ext],this.path=this.lookup(a)}function tryStat(e){debug('stat "%s"',e);try{return fs.statSync(e)}catch(r){return void 0}}var debug=require("debug")("express:view"),path=require("path"),fs=require("fs"),utils=require("./utils"),dirname=path.dirname,basename=path.basename,extname=path.extname,join=path.join,resolve=path.resolve;module.exports=View,View.prototype.lookup=function(e){var r,t=[].concat(this.root);debug('lookup "%s"',e);for(var a=0;a<t.length&&!r;a++){var n=t[a],s=resolve(n,e),i=dirname(s),o=basename(s);r=this.resolve(i,o)}return r},View.prototype.render=function(e,r){debug('render "%s"',this.path),this.engine(this.path,e,r)},View.prototype.resolve=function(e,r){var t=this.ext,a=join(e,r),n=tryStat(a);return n&&n.isFile()?a:(a=join(e,basename(r,t),"index"+t),n=tryStat(a),n&&n.isFile()?a:void 0)};