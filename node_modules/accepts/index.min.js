"use strict";function Accepts(e){return this instanceof Accepts?(this.headers=e.headers,void(this.negotiator=new Negotiator(e))):new Accepts(e)}function extToMime(e){return-1===e.indexOf("/")?mime.lookup(e):e}function validMime(e){return"string"==typeof e}var Negotiator=require("negotiator"),mime=require("mime-types");module.exports=Accepts,Accepts.prototype.type=Accepts.prototype.types=function(e){var r=e;if(r&&!Array.isArray(r)){r=new Array(arguments.length);for(var t=0;t<r.length;t++)r[t]=arguments[t]}if(!r||0===r.length)return this.negotiator.mediaTypes();if(!this.headers.accept)return r[0];var a=r.map(extToMime),n=this.negotiator.mediaTypes(a.filter(validMime)),s=n[0];return s?r[a.indexOf(s)]:!1},Accepts.prototype.encoding=Accepts.prototype.encodings=function(e){var r=e;if(r&&!Array.isArray(r)){r=new Array(arguments.length);for(var t=0;t<r.length;t++)r[t]=arguments[t]}return r&&0!==r.length?this.negotiator.encodings(r)[0]||!1:this.negotiator.encodings()},Accepts.prototype.charset=Accepts.prototype.charsets=function(e){var r=e;if(r&&!Array.isArray(r)){r=new Array(arguments.length);for(var t=0;t<r.length;t++)r[t]=arguments[t]}return r&&0!==r.length?this.negotiator.charsets(r)[0]||!1:this.negotiator.charsets()},Accepts.prototype.lang=Accepts.prototype.langs=Accepts.prototype.language=Accepts.prototype.languages=function(e){var r=e;if(r&&!Array.isArray(r)){r=new Array(arguments.length);for(var t=0;t<r.length;t++)r[t]=arguments[t]}return r&&0!==r.length?this.negotiator.languages(r)[0]||!1:this.negotiator.languages()};