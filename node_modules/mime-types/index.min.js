"use strict";function charset(e){if(!e||"string"!=typeof e)return!1;var r=EXTRACT_TYPE_REGEXP.exec(e),t=r&&db[r[1].toLowerCase()];return t&&t.charset?t.charset:r&&TEXT_TYPE_REGEXP.test(r[1])?"UTF-8":!1}function contentType(e){if(!e||"string"!=typeof e)return!1;var r=-1===e.indexOf("/")?exports.lookup(e):e;if(!r)return!1;if(-1===r.indexOf("charset")){var t=exports.charset(r);t&&(r+="; charset="+t.toLowerCase())}return r}function extension(e){if(!e||"string"!=typeof e)return!1;var r=EXTRACT_TYPE_REGEXP.exec(e),t=r&&exports.extensions[r[1].toLowerCase()];return t&&t.length?t[0]:!1}function lookup(e){if(!e||"string"!=typeof e)return!1;var r=extname("x."+e).toLowerCase().substr(1);return r?exports.types[r]||!1:!1}function populateMaps(e,r){var t=["nginx","apache",void 0,"iana"];Object.keys(db).forEach(function(a){var n=db[a],s=n.extensions;if(s&&s.length){e[a]=s;for(var i=0;i<s.length;i++){var o=s[i];if(r[o]){var u=t.indexOf(db[r[o]].source),c=t.indexOf(n.source);if("application/octet-stream"!==r[o]&&(u>c||u===c&&"application/"===r[o].substr(0,12)))continue}r[o]=a}}})}var db=require("mime-db"),extname=require("path").extname,EXTRACT_TYPE_REGEXP=/^\s*([^;\s]*)(?:;|\s|$)/,TEXT_TYPE_REGEXP=/^text\//i;exports.charset=charset,exports.charsets={lookup:charset},exports.contentType=contentType,exports.extension=extension,exports.extensions=Object.create(null),exports.lookup=lookup,exports.types=Object.create(null),populateMaps(exports.extensions,exports.types);