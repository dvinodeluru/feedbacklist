"use strict";function parse(e,r){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var t={},a=r||{},n=e.split(pairSplitRegExp),s=a.decode||decode,i=0;i<n.length;i++){var o=n[i],u=o.indexOf("=");if(!(0>u)){var c=o.substr(0,u).trim(),f=o.substr(++u,o.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),void 0==t[c]&&(t[c]=tryDecode(f,s))}}return t}function serialize(e,r,t){var a=t||{},n=a.encode||encode;if("function"!=typeof n)throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(e))throw new TypeError("argument name is invalid");var s=n(r);if(s&&!fieldContentRegExp.test(s))throw new TypeError("argument val is invalid");var i=e+"="+s;if(null!=a.maxAge){var o=a.maxAge-0;if(isNaN(o))throw new Error("maxAge should be a Number");i+="; Max-Age="+Math.floor(o)}if(a.domain){if(!fieldContentRegExp.test(a.domain))throw new TypeError("option domain is invalid");i+="; Domain="+a.domain}if(a.path){if(!fieldContentRegExp.test(a.path))throw new TypeError("option path is invalid");i+="; Path="+a.path}if(a.expires){if("function"!=typeof a.expires.toUTCString)throw new TypeError("option expires is invalid");i+="; Expires="+a.expires.toUTCString()}if(a.httpOnly&&(i+="; HttpOnly"),a.secure&&(i+="; Secure"),a.sameSite){var u="string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite;switch(u){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return i}function tryDecode(e,r){try{return r(e)}catch(t){return e}}exports.parse=parse,exports.serialize=serialize;var decode=decodeURIComponent,encode=encodeURIComponent,pairSplitRegExp=/; */,fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;