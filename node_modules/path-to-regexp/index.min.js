function pathtoRegexp(e,r,t){t=t||{},r=r||[];var f,a=t.strict,n=t.end!==!1,s=t.sensitive?"":"i",i=0,o=r.length,u=0,c=0;if(e instanceof RegExp){for(;f=MATCHING_GROUP_REGEXP.exec(e.source);)r.push({name:c++,optional:!1,offset:f.index});return e}if(Array.isArray(e))return e=e.map(function(e){return pathtoRegexp(e,r,t).source}),new RegExp("(?:"+e.join("|")+")",s);for(e=("^"+e+(a?"":"/"===e[e.length-1]?"?":"/?")).replace(/\/\(/g,"/(?:").replace(/([\/\.])/g,"\\$1").replace(/(\\\/)?(\\\.)?:(\w+)(\(.*?\))?(\*)?(\?)?/g,function(e,t,a,n,s,o,u,c){t=t||"",a=a||"",s=s||"([^\\/"+a+"]+?)",u=u||"",r.push({name:n,optional:!!u,offset:c+i});var f=""+(u?"":t)+"(?:"+a+(u?t:"")+s+(o?"((?:[\\/"+a+"].+?)?)":"")+")"+u;return i+=f.length-e.length,f}).replace(/\*/g,function(e,t){for(var a=r.length;a-->o&&r[a].offset>t;)r[a].offset+=3;return"(.*)"});f=MATCHING_GROUP_REGEXP.exec(e);){for(var p=0,l=f.index;"\\"===e.charAt(--l);)p++;p%2!==1&&((o+u===r.length||r[o+u].offset>f.index)&&r.splice(o+u,0,{name:c++,optional:!1,offset:f.index}),u++)}return e+=n?"$":"/"===e[e.length-1]?"":"(?=\\/|$)",new RegExp(e,s)}module.exports=pathtoRegexp;var MATCHING_GROUP_REGEXP=/\((?!\?)/g;