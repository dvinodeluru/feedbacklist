"use strict";function parseAcceptEncoding(e){for(var r=e.split(","),t=!1,a=1,n=0,s=0;n<r.length;n++){var i=parseEncoding(r[n].trim(),n);i&&(r[s++]=i,t=t||specify("identity",i),a=Math.min(a,i.q||1))}return t||(r[s++]={encoding:"identity",q:a,i:n}),r.length=s,r}function parseEncoding(e,r){var t=simpleEncodingRegExp.exec(e);if(!t)return null;var a=t[1],n=1;if(t[2])for(var s=t[2].split(";"),r=0;r<s.length;r++){var i=s[r].trim().split("=");if("q"===i[0]){n=parseFloat(i[1]);break}}return{encoding:a,q:n,i:r}}function getEncodingPriority(e,r,t){for(var a={o:-1,q:0,s:0},n=0;n<r.length;n++){var s=specify(e,r[n],t);s&&(a.s-s.s||a.q-s.q||a.o-s.o)<0&&(a=s)}return a}function specify(e,r,t){var a=0;if(r.encoding.toLowerCase()===e.toLowerCase())a|=1;else if("*"!==r.encoding)return null;return{i:t,o:r.i,q:r.q,s:a}}function preferredEncodings(e,r){var t=parseAcceptEncoding(e||"");if(!r)return t.filter(isQuality).sort(compareSpecs).map(getFullEncoding);var a=r.map(function(e,r){return getEncodingPriority(e,t,r)});return a.filter(isQuality).sort(compareSpecs).map(function(e){return r[a.indexOf(e)]})}function compareSpecs(e,r){return r.q-e.q||r.s-e.s||e.o-r.o||e.i-r.i||0}function getFullEncoding(e){return e.encoding}function isQuality(e){return e.q>0}module.exports=preferredEncodings,module.exports.preferredEncodings=preferredEncodings;var simpleEncodingRegExp=/^\s*([^\s;]+)\s*(?:;(.*))?$/;